# 第二模块 函数编程

## 第一章 函数基础

### 1. 函数定义

函数是指将一组语句的集合通过一个名字(函数名)封装起来，要想执行这个函数，只需调用其函数名即可，在python中使用def来定义一个函数。

特点：

- 减少重复代码
- 使程序变的可扩展（使用*args, **kwargs）
- 使程序变得容易维护

函数调用时，首先会先申请一个内存空间来保存函数体代码，然后将内存地址和函数名绑定，并且在定义函数时，只检查语法，不会执行函数代码。

```python
'''
def 函数名(参数1,参数2,...):
    """文档描述"""
    函数体
    return 值
'''
```

### 2. 函数定义的三种方式：

- 无参数

- 有参数
- 空函数，使用pass来跳过函数

### 3. 函数调用的三种方式：

- 使用()调用
- 函数有返回值时，可以使用表达式调用
- 将返回值作为函数的参数继续调用

### 4. 函数返回值的三种形式

return是函数结束的标志，即函数体代码一旦运行到return就会立刻停止，并会将return后的值作为本次运行的结果返回，有三种返回值：

- 返回None：函数体没有return或return None
- 返回一个值：return 值
- 返回多个值：return+用逗号分隔开多个值，最后以元组的形式返回

## 第二章 函数的参数

### 1. 参数的定义

在定义函数或调用函数时，给函数添加值，就叫做函数的参数。

### 2. 形参的概念及三种类型

在函数的定义阶段，括号中声明的参数，称之为形参，类似于变量名，有三种形参：

- 位置形参：从左到右必须输入。
- 默认形参：定义阶段已经赋值，调用阶段可以不赋值，如果赋值则覆盖。
- 非固定参数：*args, **kwargs。

### 3. 实参的概念及三种类型

在函数的调用阶段，括号中传入的值，称之为实参，类似于变量值，有三种实参：

- 位置实参：从左到右进行输入。
- 可以修改默认形参的值：同上。
- 关键参数：将位置参数名进行key=value输入。

注意：在实参中同样可以出现*加元组或者字典，需要将其进行打散再对应操作。

如果在定义阶段使用了非固定参数，那么在调用阶段可以输入多个值，或多个关键参数，将被转换成元组和字典的形式。

## 第三章 名称空间和作用域

### 1. 名称空间的定义

名称空间就是存放名字与对象映射/绑定关系的地方，可以分为三种：

- 内建名称空间（built-in）：存放的python解释器内置的名字。
- 全局名称空间（global）：只要不是函数/内置的名字，其余都是全局名称空间。
- 局部名称空间（local）：在调用函数时运行函数体代码，产生的局部变量。

### 2. 名称空间的加载顺序及查找优先级

加载顺序：内建名称空间>全局名称空间>局部名称空间。

查找优先级：从当前所在位置一层层向上查找，且如果存在“嵌套”关系，则以定义时为准。

各个名称空间实际上没有嵌套关系，讲课只是为了方便理解，而且函数在定义阶段只会扫描代码，开辟空间，但是不会给变量赋值，只有当函数在调用阶段，才会给变量赋值。在定义函数的最顶行可以通过global xxx 来定义一个全局变量，或者使用nonlocal xxx来修改上一层函数的变量。

## 第四章 函数嵌套

**精髓：把函数当做变量去使用**

func = 内存地址，不加括号相当于内存地址，加括号相当于调用函数拿到返回值。具体用法如下：

- 赋值操作，f = func
- 当做参数，foo(func)
- 作为返回值，return func，在后面的语法糖会大量使用
- 作为容器中的一个元素，l = [func, ]，dic = {'k': func}

### 1. 嵌套函数

将大程序分解成一个个的小程序来实现，需要跟后面的语法糖结合使用。

### 2. 闭包函数

闭包函数实际上是名称空间与作用域+函数嵌套+函数对象这些知识的综合体现。

闭：指的是该函数是内嵌函数

包：指的是该函数对外层函数作用域名字的引用（不是对全局作用域）

```python
def f1():
	x = 333
	def f2():
		print(x)
    return f2
```



通过返回f2的内存地址，使得f2()在全局范围内可以直接调用。

闭包函数最大的作用实际上是提供了一种给函数体传参的新方法。